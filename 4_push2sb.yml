target_default: 4_push2sb

packages:
  - tidyverse
  - dssecrets
  - readr
  - sbtools
  - scipiper
  - yaml

sources:
  - 4_push2sb/src/sb_utils.R

targets:
  4_push2sb:
    depends:
      - 4_push2sb/log/pgdl_metrics_on_sb.csv
      - 4_push2sb/log/pb0_metrics_on_sb.csv

  ### Push TOHA & annual metrics files for MN Data release ###
  
  sb_id_mnrelease:
    command: c(I('5e774355e4b01d509270e2a1'))
  
  4_push2sb/log/pgdl_metrics_on_sb.csv:
    command: sb_replace_files(
      filename = target_name, 
      sb_id = sb_id_mnrelease, 
      '3_summarize/out/annual_metrics_pgdl.csv',
      file_hash = '3_summarize/out/3_summarize_zip_pgdl_toha.yml',
      sources = '4_push2sb/src/sb_utils.R')
  
  4_push2sb/log/pb0_metrics_on_sb.csv:
    command: sb_replace_files(
      filename = target_name, 
      sb_id = sb_id_mnrelease, 
      '3_summarize/out/annual_metrics_pb0.csv',
      file_hash = '3_summarize/out/3_summarize_zip_pb0_toha.yml',
      sources = '4_push2sb/src/sb_utils.R')
